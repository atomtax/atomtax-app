# 🏢 매매사업자 부동산 드라이브 연동 완료

## ✅ 구현 완료 (v3.3)

매매사업자 부동산 관련 파일을 위한 **별도 드라이브 폴더** 기능이 추가되었습니다!

---

## 📊 기능 개요

### 이전 (v3.2)
- **구글 드라이브 폴더**: 고객사 기장 관련 파일만 관리

### 현재 (v3.3)
- **구글 드라이브 폴더 (기장)**: 고객사 기장 관련 파일 🟢
- **매매사업자 부동산 폴더**: 부동산 관련 파일 별도 관리 🟠

---

## 🎯 주요 변경사항

### 1️⃣ 데이터베이스
- **clients 테이블**: 21개 → **22개 필드**
- 신규 필드: `real_estate_drive_folder` (매매사업자 부동산 폴더 URL)

### 2️⃣ 고객사 목록 (clients.html)
**컬럼 구성:**
| 번호 | 거래처명 | 담당자 | 사업자번호 | 대표자 | 업종 | 연락처 | **기장** | **부동산** | 수정 | 삭제 |

**드라이브 버튼:**
- **기장 (🟢 초록색)**: 기장 관련 파일 폴더
- **부동산 (🟠 주황색)**: 매매사업자 부동산 관련 파일 폴더
- 폴더가 없으면: 회색 `-` 표시

### 3️⃣ 고객사 추가/수정 폼
**기본 정보 섹션에 2개 필드:**

```
📧 이메일
├─────────────────────────────────────

🟢 구글 드라이브 폴더 URL (기장)
├─────────────────────────────────────
   고객사 관련 파일이 저장된 구글 드라이브 폴더 링크

🟠 매매사업자 부동산 폴더 URL
├─────────────────────────────────────
   매매사업자 부동산 관련 파일이 저장된 구글 드라이브 폴더 링크
```

### 4️⃣ 빠른 조회 모달
**기본 정보 탭에 표시:**
- 🟢 **구글 드라이브 폴더 (기장)**: 클릭 시 기장 드라이브 열기
- 🟠 **매매사업자 부동산 폴더**: 클릭 시 부동산 드라이브 열기

### 5️⃣ 고객사 상세 페이지 (client-detail.html)
**기본 정보 섹션:**
- 🟢 **구글 드라이브 폴더 (기장)** 버튼
- 🟠 **매매사업자 부동산 폴더** 버튼

---

## 🖥️ 화면별 표시

### 1. 고객사 목록

```
┌────────────────────────────────────────────────────────────┐
│ 거래처명 │ 담당자 │ 사업자번호   │ ... │ 기장 │ 부동산 │ 작업 │
├────────────────────────────────────────────────────────────┤
│ ㈜금아실업 │ 김철수 │ 123-45-67890 │ ... │ 🟢  │  🟠   │ ✏️ 🗑️ │
│ ㈜나라상사 │ 이영희 │ 234-56-78901 │ ... │ 🟢  │  ➖   │ ✏️ 🗑️ │
│ ㈜다다회사 │ 박민수 │ 345-67-89012 │ ... │ ➖  │  ➖   │ ✏️ 🗑️ │
└────────────────────────────────────────────────────────────┘
```

**아이콘 설명:**
- 🟢 **초록색 구글 드라이브**: 기장 폴더 있음
- 🟠 **주황색 건물**: 부동산 폴더 있음
- ➖ **회색 대시**: 폴더 없음

### 2. 빠른 조회 모달

```
┌──────────────────────────────────────────┐
│  ㈜금아실업 고객사 정보                  │
├──────────────────────────────────────────┤
│  [기본정보] [사업자정보] [세무정보]      │
├──────────────────────────────────────────┤
│  번호: 1                                 │
│  거래처명: ㈜금아실업                    │
│  담당자: 김철수                          │
│  이메일: info@example.com                │
│                                          │
│  🟢 구글 드라이브 폴더 (기장):          │
│  [기장 드라이브 폴더 열기 🔗]           │
│                                          │
│  🟠 매매사업자 부동산 폴더:             │
│  [부동산 드라이브 폴더 열기 🔗]         │
└──────────────────────────────────────────┘
```

### 3. 고객사 상세 페이지

```
┌──────────────────────────────────────────┐
│  기본 정보                                │
├──────────────────────────────────────────┤
│  번호: 1                                 │
│  거래처명: ㈜금아실업                    │
│  이메일: info@example.com                │
│                                          │
│  🟢 구글 드라이브 폴더 (기장):          │
│  ┌────────────────────────────────┐    │
│  │ 🟢 기장 드라이브 폴더 열기 🔗 │    │
│  └────────────────────────────────┘    │
│                                          │
│  🟠 매매사업자 부동산 폴더:             │
│  ┌────────────────────────────────┐    │
│  │ 🟠 부동산 드라이브 폴더 열기 🔗│    │
│  └────────────────────────────────┘    │
└──────────────────────────────────────────┘
```

---

## 📋 사용 방법

### ✅ 부동산 드라이브 폴더 등록하기

1. **고객사 목록**에서 **"수정"** 버튼(✏️) 클릭
2. **기본 정보** 섹션에서 아래 2개 필드 확인:
   - 🟢 **구글 드라이브 폴더 URL** (기장 관련)
   - 🟠 **매매사업자 부동산 폴더 URL** (부동산 관련)
3. 각각의 구글 드라이브 웹 URL 붙여넣기
4. **"저장"** 클릭
5. 페이지 새로고침 (F5)

### 🔗 드라이브 폴더 접근하기

**방법 1: 고객사 목록에서**
- **기장 폴더**: 🟢 초록색 버튼 클릭
- **부동산 폴더**: 🟠 주황색 버튼 클릭

**방법 2: 빠른 조회 모달에서**
- 거래처명 클릭 → 기본정보 탭 → 원하는 드라이브 링크 클릭

**방법 3: 상세 페이지에서**
- 외부 링크 아이콘(🗗) 클릭 → 원하는 드라이브 버튼 클릭

---

## 🎨 색상 가이드

| 용도 | 색상 | 아이콘 | 설명 |
|------|------|--------|------|
| **기장 드라이브** | 🟢 #34a853 (구글 초록) | `<i class="fab fa-google-drive"></i>` | 기장 관련 파일 |
| **부동산 드라이브** | 🟠 #f59e0b (주황) | `<i class="fas fa-building"></i>` | 매매사업자 부동산 관련 파일 |
| **폴더 없음** | ⚪ #d1d5db (회색) | `<i class="fas fa-minus"></i>` | 드라이브 폴더 미등록 |

---

## 💡 활용 사례

### 사례 1: 일반 고객사 (기장만)
```
고객사: ㈜나라상사
- 기장 폴더: ✅ 등록됨 (세금계산서, 회계장부)
- 부동산 폴더: ❌ 없음 (매매사업자 아님)
```

### 사례 2: 매매사업자 고객사
```
고객사: ㈜금아실업
- 기장 폴더: ✅ 등록됨 (기장 관련 문서)
- 부동산 폴더: ✅ 등록됨 (부동산 매매 관련 문서)
  → 물건별 폴더, 계약서, 등기부등본 등
```

### 사례 3: 폴더 구조 예시
```
📁 공유 드라이브
  └─ 📁 아톰세무회계 공유드라이브
      ├─ 📁 1. 기장
      │   └─ 📁 1. 금아실업_인증서 비번 ksbb3488#$
      │       ├─ 📄 세금계산서
      │       └─ 📄 회계장부
      └─ 📁 2. 매매사업자 부동산
          └─ 📁 1. 금아실업_부동산
              ├─ 📁 물건1_강남 아파트
              ├─ 📁 물건2_서초 오피스텔
              └─ 📄 매매계약서 모음
```

---

## 🔧 기술 세부사항

### 데이터베이스 스키마

**clients 테이블 (22개 필드)**

| 필드명 | 타입 | 설명 |
|--------|------|------|
| ... | ... | (기존 필드 생략) |
| google_drive_folder | text | 구글 드라이브 폴더 URL (기장) |
| real_estate_drive_folder | text | 🆕 매매사업자 부동산 폴더 URL |

### 구현 파일

1. **clients.html**
   - 목록 테이블 헤더: "기장", "부동산" 컬럼
   - 모달 폼: 부동산 드라이브 URL 입력 필드
   - 빠른 조회 모달: 부동산 드라이브 표시

2. **client-detail.html**
   - 기본 정보 섹션: 부동산 드라이브 버튼
   - escapeHtml() 함수 (XSS 방지)

3. **js/clients.js**
   - `saveClient()`: `real_estate_drive_folder` 저장
   - `editClient()`: `real_estate_drive_folder` 로드
   - `renderTable()`: 부동산 드라이브 버튼 렌더링
   - `showQuickView()`: 부동산 드라이브 링크 표시

4. **debug_drive.html**
   - 부동산 드라이브 URL 디버깅 기능 추가

---

## 🚀 업데이트 내역

### v3.3 (2026-02-04)
- ✅ `clients` 테이블에 `real_estate_drive_folder` 필드 추가 (22개 필드)
- ✅ 고객사 추가/수정 폼에 부동산 드라이브 URL 입력란 추가
- ✅ 고객사 목록 테이블 컬럼 변경: "드라이브" → "기장", "부동산"
- ✅ 빠른 조회 모달에 부동산 드라이브 링크 추가
- ✅ 고객사 상세 페이지에 부동산 드라이브 버튼 추가
- ✅ 저장/수정/렌더링 로직에 `real_estate_drive_folder` 포함
- ✅ 색상 구분: 기장(초록), 부동산(주황)
- ✅ debug_drive.html 업데이트

### v3.2 (2026-02-04)
- 구글 드라이브 폴더 연동 (기장용)

---

## 📞 지원

문제가 발생하거나 개선 요청이 있으면 시스템 관리자에게 문의하세요.

**관련 파일:**
- `clients.html`
- `client-detail.html`
- `js/clients.js`
- `debug_drive.html`

**테이블:** `clients`

**필드:**
- `google_drive_folder` (기장)
- `real_estate_drive_folder` (부동산)
