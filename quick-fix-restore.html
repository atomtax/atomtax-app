<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸´ê¸‰ ë°ì´í„° ë³µêµ¬</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Pretendard', -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
            max-width: 800px;
            width: 100%;
        }
        h1 { color: #333; margin-bottom: 20px; font-size: 28px; }
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            font-size: 18px;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            font-weight: 600;
            margin: 10px 0;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6); }
        .btn:disabled { background: #ccc; cursor: not-allowed; }
        .log {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            display: none;
        }
        .log-entry { margin: 5px 0; padding: 5px; }
        .log-success { color: #28a745; }
        .log-error { color: #dc3545; }
        .log-info { color: #0056b3; }
        .summary {
            background: #e7f3ff;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-top: 20px;
            border-radius: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>âš¡ ê¸´ê¸‰ ë°ì´í„° ë³µêµ¬</h1>
        <p style="margin-bottom: 20px; color: #666;">ë§¤ë§¤ì‚¬ì—…ì ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ë³µêµ¬í•©ë‹ˆë‹¤</p>
        <button id="restoreBtn" class="btn">ğŸš€ ì§€ê¸ˆ ë³µêµ¬ ì‹œì‘</button>
        <div class="log" id="log"></div>
        <div class="summary" id="summary"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-config.js"></script>
    <script>
        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            logDiv.style.display = 'block';
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.textContent = `${new Date().toLocaleTimeString()} - ${message}`;
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        const traderData = [
            ['ë””ì•¤ì˜¥ì…˜','8412301923','ì„±ìœ¤ì§€','703011','sukces0419@naver.com'],
            ['ì¤‘ì•™ë§¤ë§¤','5065001012','ì´í¬íƒœ','703011','dlgmlxo7200@naver.com'],
            ['í™”ì§„','4079106940','í•œë‚¨í¬','703011','hjhnh625@naver.com'],
            ['ëŒ€ì„±ì„¸ë¯¼','2190710886','ì—¬ì„±ë¯¼','703011','ysmfly@naver.com'],
            ['ëŸ¬ë¸Œìœ ë§¤ë§¤ì‚¬ì—…ì','5709401846','ë°±ì¢…ì—¬','703011','0429tls@naver.com'],
            ['ì„œë¡œìœˆì»´í¼ë‹ˆ','4619401668','ì •ì¬í˜„','703011','dump1011@naver.com'],
            ['ì œì´ì»¨ì„¤íŒ…','5046200738','ì •í˜œì‹¤','703011','junghyesil@gmail.com'],
            ['ì²œë§ˆì‚°ê°œë°œ','8501002474','ì‹ ìš°ì›','703012','shinsuho@naver.com'],
            ['ì–‘ì§€ì—´','2713701437','ì–‘ì§€ì—´','703011','wlduf96@gmail.com'],
            ['ì§„ë¶€ë™ì‚°','2520603162','ê¹€ì§„ì•„','703011','xjinaa@naver.com'],
            ['ì•„ë°©ë“œë¥´','7929801459','ë°•ë‹¤ê¸€','703012','dageul@naver.com'],
            ['ë¦¬ì¹˜í•˜ë£¨','7361902109','ê¹€í˜„í•™','703011','cksdnl7@naver.com'],
            ['ì§„ìœ í˜„','3581502503','ì§„ìœ í˜„','703011','jazzbi21@naver.com'],
            ['ëŸ¬ë¸Œë¯¸ë§¤ë§¤í•˜ìš°ìŠ¤','2099305400','ì´ì˜ë¯¼','703011','0429tls@naver.com'],
            ['ë”ë¸”ìœ ì•¤ì—ì´','2795400822','ì´ê±´ìš±','703012','rjsdnr8@naver.com'],
            ['í† ë¸Œ','2024501417','ìœ¤ìˆœë•','703011','estatepro2406@gmail.com'],
            ['ê¹€ê¸°ëŒ€','1800802649','ê¹€ê¸°ëŒ€','703012','bigkimkidae@gmail.com'],
            ['ë¶€ìì•„ë¹ ','3569701479','ìµœì§„í›„','703011','jinhoo1125@naver.com'],
            ['í™”ìœ ê·¸ë¼ìš´ë“œ','1564201414','ì‹ ìš°ê²½','703011','woowooff@naver.com'],
            ['ë¯¸ë¯¸ë™ì‚°','2922401939','ì´ë¯¸ì •','703011','aailun@naver.com'],
            ['ì• ì“°ì§€','2183701469','ìœ¤ì„±ê¸¸','703011','tjdrlf44@naver.com'],
            ['ì§€ìœ¤ìˆ™','7441102593','ì§€ìœ¤ìˆ™','703011','ysjji53@naver.com'],
            ['ì»´í”Œë¦¬íŠ¸ë¸”ë¦¬ìŠ¤','1193401332','ê¹€ì€ì£¼','703011','yfulzoekim@gmail.com'],
            ['êµ¬ë¦¬ì˜¥ì…˜','7959501777','ìµœì§„ì˜','703011','team561@naver.com'],
            ['í”¼ë¹„ì•¤ì œì´','2391902194','ì •ì• ë¦¬','703011','pbandj2502@gmail.com'],
            ['ë°±ë§ˆ','6842801631','í™©í•˜ë‚˜','703011','hhh5730@naver.com'],
            ['ì§€ë³µ','8723101903','ì´ì§€ì€','703011','cheonho811@gmail.com'],
            ['ì²­ì¸','8123301467','ê¹€ì§€ì€','703011','kje4402@naver.com'],
            ['ì—ìŠ¤ì œì´ì¸ë² ìŠ¤íŠ¸ë¨¼íŠ¸','4390203252','ì†¡í˜œì§€','703011','shj8879@naver.com'],
            ['ë³´ë‚˜í•˜ìš°ìŠ¤','6272002039','ì´ë¯¼í¬','703011','mineee1205@gmail.com'],
            ['ê²Ÿì‡ë¦¬ì¹˜','8710803083','ê¹€ë¯¼ì„','703012','archims@naver.com'],
            ['ì´ë£¸','4712302117','ì´ìœ ë¦¬','703011','yiut54345@naver.com'],
            ['ë³´ë—Œë¯€','6376800608','ê¶Œì€í˜œ','703011','ehhhh6680@naver.com'],
            ['ì— ì¼€ì´','4619001938','ë°±ëª…ê· ','703011','bmk1091@gmail.com'],
            ['ì—ì…‹ì—…','2299701935','ìµœí•œì—½','703011','chyoup94@daum.net'],
            ['ë””ì•„í‹€ë¦¬ì—','1678603755','ê¹€ì„±í›ˆ','703011','jesus21ksh@gmail.com'],
            ['ì—ì´ë¸”ë£¨íŠ¸','5598803695','ë°•ì§€í˜œ','703011','hay1758@gmail.com'],
            ['ë¹ˆìŠ¤ë¹„ì „í”Œë˜ë‹','8521003106','ì˜¤ë³‘ì¤€','703011','vinstagram@naver.com'],
            ['ì„ì¥í† ë¼','6772002581','ê¹€ì€ì˜','703011','kimeenyoung@naver.com'],
            ['ê¹€ì¬ê²½','1111336394','ê¹€ì¬ê²½','703011','amykim1@naver.com'],
            ['ì¡°ì´ì•¤ì½”','5260203726','ì¡°ë™ìš°','703011','jiqweji@naver.com'],
            ['ë™í™”ëœë“œ','7283301497','ì´ì¼í™”','703011','1dlfghk2@naver.com'],
            ['ë¦¬ë”ìŠ¤ì˜¥ì…˜','6262502031','í™©ì€ì£¼','703011','landa1219@naver.com'],
            ['ì£¼ì‹íšŒì‚¬í•œì¹¸','7478603094','ê³ ì›ì¬','703011','kwj1350@naver.com'],
            ['ë§Œì‹¬','6629901887','ì„ì—°ì‹¬','703011','fbanswjd@naver.com'],
            ['ë“œë¦¼ë¬¸í™€ë”©ìŠ¤','2304201459','ìœ ë¬¸ì •','703011','fbanswjd@naver.com'],
            ['í”Œë¡œë¼í–¥ë¶€ë™ì‚°','4471602474','ì´í–¥ìˆ™','703011','mmjj6139@naver.com'],
            ['í˜„ìŠ¤ì˜¥ì…˜','8495500841','í˜„ë¯¸ê²½','703011','hyoun180618@naver.com'],
            ['ë””ìœ ì¸ë² ìŠ¤íŠ¸','3590503490','ì‹ ìœ¤ì£¼','703012','cmyj012@naver.com'],
            ['ë¡œì•„ì—ìŠ¤í…Œì´íŠ¸','8749801896','ì´íƒœì„±','703011','yisiljangnim@naver.com'],
            ['ì™€ê¸€ì™€ê¸€','5361003086','í™ì€ì£¼','703011','yyy5419@naver.com'],
            ['ëˆ„í—¤ë¶€ê²½','8940103281','ì´ë³´ëŒ','703011','8220ss@naver.com'],
            ['ì‹œë¬´ê³³','8030403103','ì •ìœ ì¦','703011','otcoat@naver.com'],
            ['ì´ê¸ˆë£¡ì£¼íƒë§¤ë§¤','5469302035','ì´ê¸ˆë£¡','703011','ryonqsamo@naver.com'],
            ['ë”ë¦¬í”„','6364701138','ê¹€ì„œí¬','703011','propulsion7@naver.com'],
            ['ë‚˜ì¸ë£¨íŠ¸','8751502390','ìµœí¬êµ¬','703011','propulsion7@naver.com'],
            ['í•´','1669102529','ê¹€ì§„ì˜','703011','jimjin81@naver.com'],
            ['í•µì‹¬ë¶€ë™ì‚°','6689901833','ìœ¤ë‹¤í˜œ','703011','awesomemina@naver.com'],
            ['ë¦¬ì¹˜ê²½ë§¤','7714501081','ì´ìë¹„','703011','jabi4860@naver.com'],
            ['íƒœì‚°ë¦¬ì–¼í‹°','7761902354','ì‹ íƒœìš°','703011','stw2001@naver.com'],
            ['ì—´ì¹¸','4961802465','ì´ì‚¬ì•¼','703011','kwj1350@naver.com'],
            ['ì¼€ì´ì—ìŠ¤ì—ì´ì¹˜ì—ìŠ¤','4120799651','í™ê·¼ì„ ','703011','keunsunh@daum.net'],
            ['ë¦¬ë…¸ë²¨ë¡œ','3279102139','ê°•ê³„ë¦¼','703011','11ansgallry@naver.com'],
            ['ì˜ˆì§„íˆ¬ì','1093029636','ì´ì˜ˆì§„','703011','']
        ];

        async function restore() {
            const btn = document.getElementById('restoreBtn');
            btn.disabled = true;
            btn.textContent = 'â³ ë³µêµ¬ ì¤‘...';
            
            try {
                log('ğŸš€ ë³µêµ¬ ì‹œì‘', 'info');
                log(`ğŸ“‹ ë§¤ë§¤ì‚¬ì—…ì: ${traderData.length}ê°œ`, 'info');
                
                const { data: clients, error } = await supabase.from('clients').select('*');
                if (error) throw error;
                
                log(`âœ… Supabase: ${clients.length}ê°œ`, 'success');
                
                let updated = 0;
                for (const [name, bizNum, rep, code, email] of traderData) {
                    const client = clients.find(c => c.business_number?.replace(/-/g, '') === bizNum.replace(/-/g, ''));
                    if (client) {
                        const updateData = {};
                        if (rep && !client.representative) updateData.representative = rep;
                        if (code && !client.business_code) updateData.business_code = code;
                        if (email && !client.email) updateData.email = email;
                        
                        if (Object.keys(updateData).length > 0) {
                            const { error: updateError } = await supabase.from('clients').update(updateData).eq('id', client.id);
                            if (updateError) throw updateError;
                            updated++;
                            log(`âœ… ${name}`, 'success');
                        }
                    }
                }
                
                log(`ğŸ‰ ì™„ë£Œ! ${updated}ê°œ ì—…ë°ì´íŠ¸`, 'success');
                
                document.getElementById('summary').style.display = 'block';
                document.getElementById('summary').innerHTML = `
                    <h3>âœ… ë³µêµ¬ ì™„ë£Œ!</h3>
                    <p>ì´ ${updated}ê°œ ê³ ê°ì‚¬ ì—…ë°ì´íŠ¸ ì™„ë£Œ</p>
                    <p style="margin-top: 10px;"><strong>ì´ì œ <a href="traders-data.html" style="color: #667eea;">ë§¤ë§¤ì‚¬ì—…ì í˜ì´ì§€</a>ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”!</strong></p>
                `;
                
                btn.textContent = 'âœ… ë³µêµ¬ ì™„ë£Œ!';
                btn.style.background = '#28a745';
                
            } catch (error) {
                log(`âŒ ì˜¤ë¥˜: ${error.message}`, 'error');
                btn.textContent = 'âŒ ë³µêµ¬ ì‹¤íŒ¨';
                btn.style.background = '#dc3545';
                btn.disabled = false;
            }
        }

        document.getElementById('restoreBtn').addEventListener('click', restore);
    </script>
</body>
</html>
