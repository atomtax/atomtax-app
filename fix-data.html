<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’¾ ë°ì´í„° ë³µêµ¬ ë„êµ¬</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 850px;
            width: 100%;
            padding: 40px;
        }
        h1 {
            font-size: 28px;
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }
        .info {
            background: #e8f4fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.6;
        }
        button {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px;
            font-size: 18px;
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        #log {
            background: #1e1e1e;
            color: #00ff00;
            padding: 20px;
            border-radius: 10px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.8;
            display: none;
        }
        #log.show {
            display: block;
        }
        .success { color: #00ff00; }
        .error { color: #ff6b6b; }
        .warning { color: #ffd700; }
        .info { color: #4fc3f7; }
        .result {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #e8f5e9;
            border-radius: 10px;
            border: 2px solid #4caf50;
        }
        .result.show {
            display: block;
        }
        .result h2 {
            color: #2e7d32;
            margin-bottom: 15px;
            text-align: center;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        .stat {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-num {
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
        }
        .stat-label {
            color: #666;
            font-size: 13px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’¾ ì „ì²´ ë°ì´í„° ë³µêµ¬</h1>
        
        <div class="info">
            <strong>ğŸ“‹ ë³µêµ¬ ëŒ€ìƒ:</strong> 187ê°œ ê³ ê°ì‚¬<br>
            <strong>ğŸ“ ë³µêµ¬ í•­ëª©:</strong> ëŒ€í‘œì, ì—°ë½ì²˜, ì´ë©”ì¼, ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸, ë²•ì¸ë“±ë¡ë²ˆí˜¸, ì—…ì¢…ì½”ë“œ, ì£¼ì†Œ
        </div>

        <button id="btn" onclick="restore()">ğŸš€ ë³µêµ¬ ì‹œì‘</button>

        <div id="log"></div>

        <div id="result" class="result">
            <h2>âœ… ë³µêµ¬ ì™„ë£Œ!</h2>
            <div class="stats">
                <div class="stat">
                    <div class="stat-num" id="total">0</div>
                    <div class="stat-label">ì „ì²´</div>
                </div>
                <div class="stat">
                    <div class="stat-num" id="matched">0</div>
                    <div class="stat-label">ë§¤ì¹­</div>
                </div>
                <div class="stat">
                    <div class="stat-num" id="updated">0</div>
                    <div class="stat-label">ì—…ë°ì´íŠ¸</div>
                </div>
                <div class="stat">
                    <div class="stat-num" id="skipped">0</div>
                    <div class="stat-label">ê±´ë„ˆëœ€</div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const DATA = `ê¸ˆì•„ì‹¤ì—…,ê¹€ê²½íƒœ,2071299830,207-12-99830,,340812-1019011,010-5364-8277,ê¸ˆì•„ì‹¤ì—…,ê¹€ì„±ë°°,ì„œìš¸ ê´‘ì§„êµ¬ í™”ì–‘ë™ 50-2,701201,ë¶€ë™ì‚°,ì„ëŒ€,ksb1019011@hanmail.net
ë„ê·¸ë‹ˆì—˜,ì´ìˆ˜ì§„,4961202411,496-12-02411,,770117-1470615,,ë„ê·¸ë‹ˆì—˜,ê¹€ê·¼ì‹,ì„œìš¸íŠ¹ë³„ì‹œ ê´‘ì§„êµ¬ ëŠ¥ë™ë¡œ5ê¸¸ 41 ì§€í•˜ì¸µ(ìì–‘ë™),930919,ì„œë¹„ìŠ¤ì—…,ì• ê²¬í˜¸í…”,771590@naver.com
ë””ì•¤ì˜¥ì…˜,ê¹€ì•„ë¦„,8412301923,841-23-01923,,990419-2127414,,ë””ì•¤ì˜¥ì…˜,ì„±ìœ¤ì§€,ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ê°œí¬ë¡œ15ê¸¸ 3-4 ì§€101-A230í˜¸(ê°œí¬ë™),703011,ë¶€ë™ì‚°ì—…,ì£¼ê±°ìš© ê±´ë¬¼ ê°œë°œ ë° ê³µê¸‰ì—…,sukces0419@naver.com
ì£¼ì‹íšŒì‚¬ ë§Œí‰,ê¹€ì•„ë¦„,2348701767,234-87-01767,285011-0432314,840203-1235025,,ì£¼ì‹íšŒì‚¬ ë§Œí‰,ë°°ìš°ì£¼,ê²½ê¸°ë„ ê³ ì–‘ì‹œ ì¼ì‚°ë™êµ¬ ì •ë°œì‚°ë¡œ 33 (ì¥í•­ë™ ë‚™ì›í”„ë¼ì),743002,ë¶€ë™ì‚°ì—…,ë¹„ì£¼ê±°ìš© ê±´ë¬¼ ì„ëŒ€ì—…,toughcat84@gmail.com
ì¤‘ì•™ë§¤ë§¤,ê¹€ì•„ë¦„,5065001012,506-50-01012,,651125-2244924,010-2943-7201,ì¤‘ì•™ë§¤ë§¤,ì´í¬íƒœ,ê²½ê¸°ë„ ì–‘í‰êµ° ì–‘í‰ì ë„í† ë¦¬ê¸¸ 18,703011,ë¶€ë™ì‚°ì—…,ì£¼ê±°ìš© ê±´ë¬¼ ê°œë°œ ë° ê³µê¸‰ì—…,dlgmlxo7200@naver.com
ì£¼ì‹íšŒì‚¬ ìœ¤ìŠ¬ì´,ê¹€ì•„ë¦„,6668602364,666-86-02364,134511-0562676,790125-2106514,,ì£¼ì‹íšŒì‚¬ ìœ¤ìŠ¬ì´,ê¸°ê²½í¬,ê²½ê¸°ë„ ìš©ì¸ì‹œ ì²˜ì¸êµ¬ í¬ê³¡ì í¬ê³¡ë¡œ 72 204-A225(ëŒ€ë‘ë¹Œë”©),525101,ë¶€ë™ì‚°ì—…,ì£¼ê±°ìš© ê±´ë¬¼ ê°œë°œ ë° ê³µê¸‰ì—…,kiheaven@hanmail.net
í™”ì§„,ê¹€ì•„ë¦„,4079106940,407-91-06940,,610625-2650831,010-3756-8645,í™”ì§„,í•œë‚¨í¬,ì„œìš¸íŠ¹ë³„ì‹œ ì†¡íŒŒêµ¬ ì„ì´Œí˜¸ìˆ˜ë¡œ18ê¸¸ 15-11 202í˜¸(ì„ì´Œë™),703011,ë¶€ë™ì‚°ì—…,ì£¼íƒë§¤ë§¤ì—…,hjhnh625@naver.com
(ì£¼)ëŒ€ì„±í•œë¯¼,ì´ìˆ˜ì§„,8598102506,859-81-02506,110111-8096540,850527-2079120,,(ì£¼)ëŒ€ì„±í•œë¯¼,ì—¬ì„±ë¯¼,ê²½ê¸°ë„ ì•ˆì‚°ì‹œ ë‹¨ì›êµ¬ ê³ ì”ë¡œ 55 ì§€í•˜102-100í˜¸(ê³ ì”ë™ ì¤‘ì•™ì˜¤í”¼ìŠ¤í…”),525101,ë¶€ë™ì‚°,ê²½ì˜ ì»¨ì„¤íŒ…ì—…,ysmfly@naver.com
ì£¼ì‹íšŒì‚¬ ì˜¨ë¸Œë¦­ìŠ¤,ê¹€ê²½íƒœ,2248801258,224-88-01258,110111-8096540,890201-1395415,,ì£¼ì‹íšŒì‚¬ ì˜¨ë¸Œë¦­ìŠ¤,í—ˆì¬ì„±,ê²½ê¸°ë„ ê´‘ì£¼ì‹œ ì˜¤í¬ë¡œ 419-5(ë¬¸í˜•ë™),525101,ë„ë§¤ ë° ì†Œë§¤ì—…,ì „ììƒê±°ë˜ ì†Œë§¤ì—…,tax@onbrix.co.kr
ëŒ€ì„±ì„¸ë¯¼,ì´ìˆ˜ì§„,2190710886,219-07-10886,,850527-2079120,,ëŒ€ì„±ì„¸ë¯¼,ì—¬ì„±ë¯¼,ì„œìš¸íŠ¹ë³„ì‹œ ì„œëŒ€ë¬¸êµ¬ í†µì¼ë¡œ9ì•ˆê¸¸ 33(ì¶©ì •ë¡œ2ê°€),703011,ë¶€ë™ì‚°ì—…,ì£¼ê±°ìš© ê±´ë¬¼ ê°œë°œ ë° ê³µê¸‰ì—…,ysmfly@naver.com
ì•„í‹°ì›ë·°í‹°ìŠ¤íŠœë””ì˜¤,ì´ìˆ˜ì§„,8491601633,849-16-01633,,930916-2082925,,ì•„í‹°ì›ë·°í‹°ìŠ¤íŠœë””ì˜¤,ì „í˜œì›,ì„œìš¸ ë§ˆí¬êµ¬ ë§ˆí¬ëŒ€ë¡œ11ê¸¸ 21 2ì¸µ,930205,í˜‘íšŒ ë° ë‹¨ì²´ ìˆ˜ë¦¬ ë° ê¸°íƒ€ ê°œì¸ ì„œë¹„ìŠ¤ì—…,ê¸°íƒ€ ë¯¸ìš©ì—…,hyewony_@naver.com
ë¹„ë”ì—ê·¸,ì´ìˆ˜ì§„,4932901371,493-29-01371,,961216-1860926,,ë¹„ë”ì—ê·¸,ì„±ê·œë™,ì„œìš¸íŠ¹ë³„ì‹œ ì„±ë™êµ¬ ì—°ë¬´ì¥15ê¸¸ 11 Bë™ 2ì¸µ 217-7í˜¸(ì„±ìˆ˜ë™2ê°€ íƒœê´‘ì‚°ì—…),722005,ì •ë³´í†µì‹ ì—…,ì»´í“¨í„° í”„ë¡œê·¸ë˜ë° ì„œë¹„ìŠ¤ì—…,btheegg0110@naver.com
ë¹„ìš˜ë“œì‹œí‹°,ê¹€ì•„ë¦„,4478103108,447-81-03108,134511-0634582,900221-1035017,010-8516-2433,ë¹„ìš˜ë“œì‹œí‹°,í•˜ìŠ¹í˜„,ê²½ê¸°ë„ ê¹€í¬ì‹œ ì–‘ì´Œì ì–‘ê³¡ë¡œ 495 1ë™ 601í˜¸ (601-A-2í˜¸)(ìƒˆë¡¬í”„ë¼ì),722000,ì •ë³´í†µì‹ ì—…,ì‘ìš© ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ë° ê³µê¸‰ì—…,daniel.ha@beyondcity.co.kr
ì¹˜ë³´í«,ê¹€ì•„ë¦„,7060202212,706-02-02212,,890428-1070113,,ì¹˜ë³´í«,ì„ì§„ìš°,ì„œìš¸ ì˜ë“±í¬êµ¬ ê²½ì¸ë¡œ82ê¸¸ 3-4 7ì¸µ 19í˜¸ 719í˜¸,523996,ë„ë§¤ ë° ì†Œë§¤ì—…,ì „ììƒê±°ë˜ ì†Œë§¤ì—…,cibopet@naver.com
ì¹´í˜ì¬,ì´ìˆ˜ì§„,8663501231,866-35-01231,,701023-2469316,,ì¹´í˜ ì¬,ê¹€ì–‘ë¯¸,ê²½ê¸° ì„±ë‚¨ì‹œ ì¤‘ì›êµ¬ ê´‘ëª…ë¡œ 176 A1ë¸”ëŸ­ 113í˜¸,552303,ìˆ™ë°• ë° ìŒì‹ì ì—…,ì»¤í”¼ ì „ë¬¸ì ,3533ykk@naver.com
ì¡°ì¸,ë°•ìˆ˜ì§„,2063033940,206-30-33940,,770203-2822818,010-9085-8783,ì¡°ì¸,ìµœë¯¸ì—°,ì„œìš¸íŠ¹ë³„ì‹œ ê´‘ì§„êµ¬ ì²œí˜¸ëŒ€ë¡œ130ê¸¸ 35 303í˜¸(êµ¬ì˜ë™),513121,ë„ë§¤ ë¬´ì—­,ì˜ë¥˜,toeat95@naver.com
ì œì´ì•¤ìœ ë‹ˆ ì£¼ì‹íšŒì‚¬,ì´ìˆ˜ì§„,1658802808,165-88-02808,284111-0375076,821221-1542613,,ì œì´ì•¤ìœ ë‹ˆ ì£¼ì‹íšŒì‚¬,ì „ì˜¤ê· ,ê²½ê¸°ë„ ë‚¨ì–‘ì£¼ì‹œ ë³„ë‚´ì¤‘ì•™ë¡œ 26 10ì¸µ 1002-145í˜¸(ë³„ë‚´ë™),722000,ì„œë¹„ìŠ¤ì—…,ì†Œí”„íŠ¸ì›¨ì–´ ê´€ë ¨ ì»¨ì„¤íŒ…,wjsdhrbs@naver.com
ì œì´ì—”ì”¨,ì´ìˆ˜ì§„,1051588509,105-15-88509,,700225-1000911,,ì œì´ì—”ì”¨,í™©ì¬ë¦¼,ì„œìš¸íŠ¹ë³„ì‹œ ì„œëŒ€ë¬¸êµ¬ ìˆ˜ìƒ‰ë¡œ 100 703í˜¸(ë¶ê°€ì¢Œë™ DMCë˜ë¯¸ì•ˆeí¸í•œì„¸ìƒ),514969,ë„ë§¤ë°ì†Œë§¤ì—….ì œì¡°ì—…,ë°©ì§ìš©ì§ë¬¼ ëª¨ì§ë¬¼ í™”ì„¬ì§ë¬¼ ë‚˜ì—¼,jackey@jnctex.com
ì£¼ì‹íšŒì‚¬ í™ˆì—”í„°í…Œì¸ë¨¼íŠ¸,ê¹€ê²½íƒœ,3698102814,369-81-02814,110111-8355772,870618-2495919,,ì£¼ì‹íšŒì‚¬ í™ˆì—”í„°í…Œì¸ë¨¼íŠ¸,ì‹ ì´ˆë¡±,ì„œìš¸ ê°•ë‚¨êµ¬ ë…¼í˜„ë¡œ124ê¸¸ 5 302í˜¸(ë…¼í˜„ë™),749911,ì „ë¬¸ ê³¼í•™ ë° ê¸°ìˆ  ì„œë¹„ìŠ¤ì—…,ë§¤ë‹ˆì €ì—…,homeent01@naver.com
ì œëƒí¬ë“œ,ì´ìˆ˜ì§„,6512001635,651-20-01635,,880101-1036917,,ì œëƒí¬ë“œ,ìœ¤íƒœí˜¸,ì„œìš¸íŠ¹ë³„ì‹œ ìš©ì‚°êµ¬ í•œë‚¨ëŒ€ë¡œ27ê¸¸ 60 101ë™ 504(í•œë‚¨ë™ í•œë‚¨í•´í”¼íŠ¸ë¦¬),525101,ë„ë§¤ ë° ì†Œë§¤ì—…,ì „ììƒê±°ë˜ ì†Œë§¤ì—…,zegna0101@naver.com
ë¨¸ìŠ¤íŠ¸í”½,ì´ìˆ˜ì§„,3032066573,303-20-66573,,900206-1074625,,ë¨¸ìŠ¤íŠ¸í”½,ê¹€ê²½ë¯¼,ê²½ê¸° ì•ˆì‚°ì‹œ ìƒë¡êµ¬ ë³¸ì˜¤ê³µì›1ê¸¸ 12 1ì¸µ,552108,ìˆ™ë°• ë° ìŒì‹ì ì—…,ê¹€ë°¥ ë° ê¸°íƒ€ ê°„ì´ ìŒì‹ì ì—…,kkm900206@naver.com`;

        let sb;

        function log(msg, type = 'info') {
            const div = document.getElementById('log');
            div.classList.add('show');
            const line = document.createElement('div');
            line.className = type;
            line.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
            div.appendChild(line);
            div.scrollTop = div.scrollHeight;
        }

        async function restore() {
            const btn = document.getElementById('btn');
            btn.disabled = true;
            btn.textContent = 'â³ ë³µêµ¬ ì¤‘...';

            try {
                log('ğŸš€ ë³µêµ¬ ì‹œì‘', 'success');

                // Supabase ì´ˆê¸°í™”
                if (!window.supabase) {
                    throw new Error('Supabase SDK ë¡œë“œ ì‹¤íŒ¨');
                }

                sb = window.supabase.createClient(
                    'https://vdjyynwmnypuxvlhrcbk.supabase.co',
                    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZkanl5bndtbnlwdXh2bGhyY2JrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExNjc4ODEsImV4cCI6MjA4Njc0Mzg4MX0.sGM2GIQ8blhON-EHAMnXyQABnMR46_4FpqhU0Z0pAx4'
                );

                log('âœ… Supabase ì—°ê²°', 'success');

                // CSV íŒŒì‹±
                const lines = DATA.trim().split('\n');
                const rows = lines.map(l => {
                    const p = l.split(',');
                    return {
                        name: p[0],
                        biz: p[2],
                        rep: p[8],
                        phone: p[6],
                        email: p[13],
                        res: p[5],
                        corp: p[4],
                        code: p[10],
                        addr: p[9]
                    };
                });

                log(`ğŸ“‹ ${rows.length}ê°œ ë°ì´í„° íŒŒì‹±`, 'info');

                // ê³ ê° ì¡°íšŒ
                const { data: clients, error } = await sb.from('clients').select('*');
                if (error) throw error;

                log(`âœ… ${clients.length}ê°œ ê³ ê° ì¡°íšŒ`, 'success');

                let total = 0, matched = 0, updated = 0, skipped = 0;

                for (const row of rows) {
                    total++;
                    const client = clients.find(c => c.business_number?.replace(/-/g, '') === row.biz);

                    if (client) {
                        matched++;
                        const upd = {};
                        if (row.rep && !client.representative) upd.representative = row.rep;
                        if (row.phone && !client.phone) upd.phone = row.phone;
                        if (row.email && !client.email) upd.email = row.email;
                        if (row.res && !client.resident_number) upd.resident_number = row.res;
                        if (row.corp && !client.corporate_number) upd.corporate_number = row.corp;
                        if (row.code && !client.business_code) upd.business_code = row.code;
                        if (row.addr && !client.address) upd.address = row.addr;

                        if (Object.keys(upd).length > 0) {
                            await sb.from('clients').update(upd).eq('id', client.id);
                            updated++;
                            log(`âœ… ${row.name}`, 'success');
                        } else {
                            skipped++;
                        }
                    }
                }

                log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'info');
                log('ğŸ‰ ë³µêµ¬ ì™„ë£Œ!', 'success');
                log(`ì´ ${total}ê°œ / ë§¤ì¹­ ${matched}ê°œ / ì—…ë°ì´íŠ¸ ${updated}ê°œ`, 'info');

                document.getElementById('total').textContent = total;
                document.getElementById('matched').textContent = matched;
                document.getElementById('updated').textContent = updated;
                document.getElementById('skipped').textContent = skipped;
                document.getElementById('result').classList.add('show');

                btn.textContent = 'âœ… ì™„ë£Œ';
            } catch (err) {
                log(`âŒ ì—ëŸ¬: ${err.message}`, 'error');
                alert('ì—ëŸ¬: ' + err.message);
                btn.disabled = false;
                btn.textContent = 'ğŸ”„ ë‹¤ì‹œ ì‹œë„';
            }
        }
    </script>
</body>
</html>
