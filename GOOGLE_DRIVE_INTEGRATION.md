# 📁 구글 드라이브 연동 가이드

## 🎯 기능 개요

고객사별 구글 드라이브 폴더 URL을 시스템에 저장하고, 고객사 목록/상세 페이지에서 즉시 접근할 수 있는 기능입니다.

---

## ✨ 주요 기능

### 1️⃣ 구글 드라이브 폴더 URL 저장
- 고객사 추가/수정 폼에서 구글 드라이브 폴더 URL 입력
- 폼 위치: **기본 정보 섹션** (이메일 아래)
- 입력 예시: `https://drive.google.com/drive/folders/1abc...`

### 2️⃣ 고객사 목록에서 즉시 접근
- **목록 테이블 "드라이브" 컬럼**에 버튼 표시
- 드라이브 폴더가 있으면: 🟢 **초록색 구글 드라이브 아이콘 버튼** 표시
- 드라이브 폴더가 없으면: ➖ **회색 '-' 표시**
- 클릭 시 새 탭에서 구글 드라이브 폴더 열림

### 3️⃣ 빠른 조회 모달에서 확인
- 거래처명 클릭 또는 눈 아이콘(👁️) 클릭 시 빠른 조회 모달 표시
- **기본 정보 탭**에 "구글 드라이브 폴더" 항목 표시
- 폴더가 있으면: **"드라이브 폴더 열기"** 링크 표시
- 폴더가 없으면: **'-'** 표시

### 4️⃣ 상세 페이지에서 확인
- 고객사 상세 페이지(`client-detail.html`)
- **기본 정보 섹션**에 "구글 드라이브 폴더" 항목 표시
- 폴더가 있으면: **초록색 버튼** "드라이브 폴더 열기" 표시
- 폴더가 없으면: **'-'** 표시

---

## 📋 사용 방법

### ✅ 구글 드라이브 폴더 URL 등록하기

1. **고객사 목록** 페이지에서 **"수정"** 버튼 클릭
2. 또는 **"+ 고객사 추가"** 버튼 클릭
3. **기본 정보** 섹션에서 "구글 드라이브 폴더 URL" 입력란 찾기
4. 구글 드라이브 폴더 URL 붙여넣기
   - 예시: `https://drive.google.com/drive/folders/1abc123def456`
5. **"저장"** 버튼 클릭

### 🔗 구글 드라이브 폴더 URL 얻는 방법

1. 구글 드라이브에서 고객사 전용 폴더 열기
2. 주소창의 URL 전체 복사
3. 시스템에 붙여넣기

**URL 형식 예시:**
```
https://drive.google.com/drive/folders/1abc123def456xyz789
```

---

## 🖥️ 화면별 표시 방식

### 1. 고객사 목록 (clients.html)

| 거래처명 | 담당자 | 사업자번호 | ... | **드라이브** | 작업 |
|---------|--------|-----------|-----|------------|------|
| ㈜가나다 | 김철수 | 123-45-67890 | ... | **🟢 드라이브 아이콘** | ✏️ 🗑️ |
| ㈜라마바 | 이영희 | 234-56-78901 | ... | **➖** | ✏️ 🗑️ |

- **초록색 드라이브 아이콘**: 폴더 URL이 등록된 경우
- **회색 '-' 표시**: 폴더 URL이 없는 경우

### 2. 빠른 조회 모달

```
┌─────────────────────────────────────┐
│  ㈜가나다 고객사 정보                │
├─────────────────────────────────────┤
│  [기본정보] [사업자정보] [세무정보]  │
├─────────────────────────────────────┤
│  번호: 1                            │
│  거래처명: ㈜가나다                  │
│  담당자: 김철수                      │
│  이메일: info@example.com           │
│                                     │
│  🟢 구글 드라이브 폴더:             │
│  [드라이브 폴더 열기 🔗]            │
└─────────────────────────────────────┘
```

### 3. 고객사 상세 페이지 (client-detail.html)

```
┌─────────────────────────────────────┐
│  기본 정보                           │
├─────────────────────────────────────┤
│  번호: 1                            │
│  거래처명: ㈜가나다                  │
│  담당자: 김철수                      │
│  연락처: 010-1234-5678             │
│  이메일: info@example.com           │
│                                     │
│  🟢 구글 드라이브 폴더:             │
│  ┌─────────────────────────────┐  │
│  │ 🟢 드라이브 폴더 열기 🔗    │  │
│  └─────────────────────────────┘  │
└─────────────────────────────────────┘
```

---

## 🔧 기술 세부사항

### 데이터베이스 스키마

**clients 테이블**에 새 필드 추가:

| 필드명 | 타입 | 설명 |
|--------|------|------|
| google_drive_folder | text | 구글 드라이브 폴더 URL |

### 구현 파일

1. **clients.html**
   - 고객사 추가/수정 폼에 입력 필드 추가
   - 목록 테이블에 "드라이브" 컬럼 추가
   - 빠른 조회 모달에 드라이브 항목 추가

2. **client-detail.html**
   - 기본 정보 섹션에 드라이브 항목 추가
   - `escapeHtml()` 함수 추가 (XSS 방지)

3. **js/clients.js**
   - `saveClient()`: 저장 시 `google_drive_folder` 포함
   - `editClient()`: 수정 시 `google_drive_folder` 로드
   - `renderTable()`: 테이블 렌더링 시 드라이브 버튼 표시
   - `showQuickView()`: 빠른 조회 모달에 드라이브 링크 표시

---

## 🎨 디자인 가이드

### 아이콘 및 색상

- **구글 드라이브 아이콘**: `<i class="fab fa-google-drive"></i>` (Font Awesome)
- **드라이브 버튼 색상**: `#34a853` (구글 초록색)
- **외부 링크 아이콘**: `<i class="fas fa-external-link-alt"></i>`

### 버튼 스타일

```css
/* 목록 테이블 버튼 */
background: #34a853;
border-color: #34a853;
padding: 6px 12px;
border-radius: 4px;

/* 상세 페이지 버튼 */
background: #34a853;
color: white;
padding: 12px 16px;
border-radius: 8px;
font-weight: 500;
transition: all 0.2s;
```

---

## 🚀 업데이트 내역

### v3.2 (2026-02-04)
- ✅ `clients` 테이블 스키마에 `google_drive_folder` 필드 추가 (21개 필드)
- ✅ 고객사 추가/수정 폼에 구글 드라이브 URL 입력란 추가
- ✅ 고객사 목록 테이블에 "드라이브" 컬럼 및 버튼 추가
- ✅ 빠른 조회 모달에 드라이브 링크 표시
- ✅ 고객사 상세 페이지에 드라이브 버튼 추가
- ✅ 저장/수정 로직에 `google_drive_folder` 필드 포함
- ✅ XSS 방지를 위한 `escapeHtml()` 함수 추가

---

## 💡 활용 사례

### 1. 고객사별 문서 관리
```
📁 구글 드라이브
  └─ 📁 고객사별 폴더
      ├─ 📁 ㈜가나다
      │   ├─ 📄 사업자등록증.pdf
      │   ├─ 📄 계약서.pdf
      │   └─ 📁 세금계산서
      ├─ 📁 ㈜라마바
      └─ 📁 ㈜사아자
```

### 2. 빠른 문서 접근
- 고객사 목록에서 **드라이브 버튼 클릭** → 즉시 관련 문서 확인
- 전화 상담 중에도 **빠른 조회 모달 + 드라이브** → 실시간 문서 확인

### 3. 팀 협업
- 담당자 변경 시에도 **구글 드라이브 링크 유지**
- 모든 팀원이 **동일한 폴더 접근 가능**

---

## ⚠️ 주의사항

### 1. 구글 드라이브 권한 설정
- 폴더 공유 권한을 **"링크가 있는 모든 사용자"** 또는 **"특정 사용자"**로 설정
- 시스템에 등록된 URL로 접근 시 권한이 없으면 구글 로그인 요구됨

### 2. URL 형식
- **정확한 폴더 URL** 입력 필요
- 파일 URL이 아닌 **폴더 URL** 사용
- 올바른 예시: `https://drive.google.com/drive/folders/1abc...`
- 잘못된 예시: `https://drive.google.com/file/d/1abc.../view`

### 3. 보안
- 구글 드라이브 폴더에 **민감한 정보 저장 시 권한 관리 필수**
- 외부 공유 시 **읽기 전용** 권한 권장

---

## 📞 지원

문제가 발생하거나 개선 요청이 있으면 시스템 관리자에게 문의하세요.

- **관련 파일**: `clients.html`, `client-detail.html`, `js/clients.js`
- **테이블**: `clients`
- **필드**: `google_drive_folder`
